CREATE DATABASE  IF NOT EXISTS `playcard_db` /*!40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci */ /*!80016 DEFAULT ENCRYPTION='N' */;
USE `playcard_db`;
-- MySQL dump 10.13  Distrib 8.0.43, for Win64 (x86_64)
--
-- Host: localhost    Database: playcard_db
-- ------------------------------------------------------
-- Server version	9.1.0

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `tbl_clientes`
--

DROP TABLE IF EXISTS `tbl_clientes`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tbl_clientes` (
  `id_cliente` int NOT NULL AUTO_INCREMENT,
  `str_nombre` varchar(100) DEFAULT NULL,
  `str_apellido` varchar(100) DEFAULT NULL,
  `str_telefono` varchar(20) DEFAULT NULL,
  `str_email` varchar(100) DEFAULT NULL,
  `str_codigosecreto` varchar(6) DEFAULT NULL,
  `bool_anonimo` tinyint(1) DEFAULT '0',
  `datetime_fecharegistro` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `bool_activo` tinyint(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`id_cliente`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tbl_clientes`
--

LOCK TABLES `tbl_clientes` WRITE;
/*!40000 ALTER TABLE `tbl_clientes` DISABLE KEYS */;
INSERT INTO `tbl_clientes` VALUES (7,'Alexander','Uribe','3147505411','alexuribe21@gmail.com','123456',0,'2025-09-02 06:42:10',1),(9,'Angelica','Carvajal','3113221996','angelicacarva@gmail.com','123456',0,'2025-09-02 15:49:16',1);
/*!40000 ALTER TABLE `tbl_clientes` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tbl_juegos`
--

DROP TABLE IF EXISTS `tbl_juegos`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tbl_juegos` (
  `id_juego` int NOT NULL AUTO_INCREMENT,
  `str_nombrejuego` varchar(100) NOT NULL,
  `num_costoporuso` decimal(8,2) NOT NULL,
  `bool_activo` tinyint(1) NOT NULL DEFAULT '1',
  `datetime_fechacreacion` datetime NOT NULL,
  PRIMARY KEY (`id_juego`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tbl_juegos`
--

LOCK TABLES `tbl_juegos` WRITE;
/*!40000 ALTER TABLE `tbl_juegos` DISABLE KEYS */;
INSERT INTO `tbl_juegos` VALUES (1,'Ruleta Manual',10000.00,1,'2025-09-01 21:34:34'),(2,'Lanza el Dado',3500.00,1,'2025-09-01 21:34:34'),(3,'Tiro al Blanco',4000.00,1,'2025-09-01 21:34:34');
/*!40000 ALTER TABLE `tbl_juegos` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tbl_premios`
--

DROP TABLE IF EXISTS `tbl_premios`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tbl_premios` (
  `id_premio` int NOT NULL AUTO_INCREMENT,
  `str_nombrepremio` varchar(100) NOT NULL,
  `num_puntosrequeridos` decimal(8,2) NOT NULL,
  `bool_disponible` tinyint(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`id_premio`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tbl_premios`
--

LOCK TABLES `tbl_premios` WRITE;
/*!40000 ALTER TABLE `tbl_premios` DISABLE KEYS */;
INSERT INTO `tbl_premios` VALUES (1,'botella ron',1000.00,1);
/*!40000 ALTER TABLE `tbl_premios` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tbl_tarjetaclientes`
--

DROP TABLE IF EXISTS `tbl_tarjetaclientes`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tbl_tarjetaclientes` (
  `id_tarjeta` int NOT NULL AUTO_INCREMENT,
  `str_coditotarjeta` varchar(50) NOT NULL,
  `id_cliente` int DEFAULT NULL,
  `num_saldo` decimal(10,2) NOT NULL DEFAULT '0.00',
  `enum_estado` enum('activa','bloqueada') NOT NULL DEFAULT 'activa',
  `datetime_fechaasignacion` datetime DEFAULT NULL,
  PRIMARY KEY (`id_tarjeta`),
  UNIQUE KEY `str_coditotarjeta` (`str_coditotarjeta`),
  UNIQUE KEY `ux_codito` (`str_coditotarjeta`),
  KEY `idx_cliente` (`id_cliente`),
  KEY `idx_estado` (`enum_estado`),
  CONSTRAINT `fk_tarjeta_cliente` FOREIGN KEY (`id_cliente`) REFERENCES `tbl_clientes` (`id_cliente`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=101 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tbl_tarjetaclientes`
--

LOCK TABLES `tbl_tarjetaclientes` WRITE;
/*!40000 ALTER TABLE `tbl_tarjetaclientes` DISABLE KEYS */;
INSERT INTO `tbl_tarjetaclientes` VALUES (1,'65514919774431065764&55550000000001&01*2',NULL,0.00,'activa',NULL),(2,'34481599141289526768&55550000000002&01*2',NULL,0.00,'activa',NULL),(3,'08381421994692115771&55550000000003&01*2',NULL,0.00,'activa',NULL),(4,'21513022216499358764&55550000000004&01*2',NULL,0.00,'activa',NULL),(5,'68689494323049537624&55550000000005&01*2',NULL,0.00,'activa',NULL),(6,'04221222963602811127&55550000000006&01*2',NULL,0.00,'activa',NULL),(7,'78318283353482028469&55550000000007&01*2',NULL,0.00,'activa',NULL),(8,'65819498973264971803&55550000000008&01*2',NULL,0.00,'activa',NULL),(9,'62683063096416180691&55550000000009&01*2',NULL,0.00,'activa',NULL),(10,'19325652188337035770&55550000000010&01*2',NULL,0.00,'activa',NULL),(11,'77957053374655634640&55550000000011&01*2',NULL,0.00,'activa',NULL),(12,'08780869376540978090&55550000000012&01*2',NULL,0.00,'activa',NULL),(13,'99334066091954001433&55550000000013&01*2',NULL,0.00,'activa',NULL),(14,'12476116439253043146&55550000000014&01*2',NULL,0.00,'activa',NULL),(15,'22291799975580946922&55550000000015&01*2',NULL,0.00,'activa',NULL),(16,'02789634331414067889&55550000000016&01*2',NULL,0.00,'activa',NULL),(17,'50774836333773545270&55550000000017&01*2',NULL,0.00,'activa',NULL),(18,'24234390771252984807&55550000000018&01*2',NULL,0.00,'activa',NULL),(19,'84898962041740367646&55550000000019&01*2',NULL,0.00,'activa',NULL),(20,'19435929929975097252&55550000000020&01*2',NULL,0.00,'activa',NULL),(21,'18165642218340277551&55550000000021&01*2',NULL,0.00,'activa',NULL),(22,'35682840916052760678&55550000000022&01*2',NULL,0.00,'activa',NULL),(23,'20360296187432958974&55550000000023&01*2',NULL,0.00,'activa',NULL),(24,'15525310481453355455&55550000000024&01*2',NULL,0.00,'activa',NULL),(25,'65741950542909910550&55550000000025&01*2',NULL,0.00,'activa',NULL),(26,'05720813008048954754&55550000000026&01*2',NULL,0.00,'activa',NULL),(27,'02622567634819457266&55550000000027&01*2',NULL,0.00,'activa',NULL),(28,'39059155308827178437&55550000000028&01*2',NULL,0.00,'activa',NULL),(29,'07820120713691572211&55550000000029&01*2',NULL,0.00,'activa',NULL),(30,'84607054167117103586&55550000000030&01*2',NULL,0.00,'activa',NULL),(31,'48016400055543202279&55550000000031&01*2',NULL,0.00,'activa',NULL),(32,'03801672061463864122&55550000000032&01*2',NULL,0.00,'activa',NULL),(33,'95791823185229144609&55550000000033&01*2',NULL,0.00,'activa',NULL),(34,'32796214076847957344&55550000000034&01*2',NULL,0.00,'activa',NULL),(35,'34794253390235052504&55550000000035&01*2',NULL,0.00,'activa',NULL),(36,'23939441612956635710&55550000000036&01*2',NULL,0.00,'activa',NULL),(37,'66554004414912997505&55550000000037&01*2',NULL,0.00,'activa',NULL),(38,'11062118596062969100&55550000000038&01*2',NULL,0.00,'activa',NULL),(39,'73370849107615716214&55550000000039&01*2',NULL,0.00,'activa',NULL),(40,'30031630021183049491&55550000000040&01*2',NULL,0.00,'activa',NULL),(41,'90251240871376146702&55550000000041&01*2',NULL,0.00,'activa',NULL),(42,'13701262175929538030&55550000000042&01*2',NULL,0.00,'activa',NULL),(43,'07100569944379990021&55550000000043&01*2',NULL,0.00,'activa',NULL),(44,'29541229900082233963&55550000000044&01*2',NULL,0.00,'activa',NULL),(45,'87614045071677010940&55550000000045&01*2',NULL,0.00,'activa',NULL),(46,'57793976625002475016&55550000000046&01*2',NULL,0.00,'activa',NULL),(47,'99499638085301425396&55550000000047&01*2',NULL,0.00,'activa',NULL),(48,'36915046526410209854&55550000000048&01*2',NULL,0.00,'activa',NULL),(49,'13589723508042880475&55550000000049&01*2',NULL,0.00,'activa',NULL),(50,'93731067218386620114&55550000000050&01*2',NULL,0.00,'activa',NULL),(51,'06207423189386450211&55550000000051&01*2',NULL,0.00,'activa',NULL),(52,'62611540688776593096&55550000000052&01*2',NULL,0.00,'activa',NULL),(53,'14563432241079851127&55550000000053&01*2',NULL,0.00,'activa',NULL),(54,'81060889248173235560&55550000000054&01*2',NULL,0.00,'activa',NULL),(55,'04969199957936843134&55550000000055&01*2',NULL,0.00,'activa',NULL),(56,'66361039996124972728&55550000000056&01*2',NULL,0.00,'activa',NULL),(57,'50980208554072100643&55550000000057&01*2',NULL,0.00,'activa',NULL),(58,'35146794124104125608&55550000000058&01*2',NULL,0.00,'activa',NULL),(59,'08684117617988013237&55550000000059&01*2',NULL,0.00,'activa',NULL),(60,'20148444805279199182&55550000000060&01*2',NULL,0.00,'activa',NULL),(61,'64697351068877965983&55550000000061&01*2',NULL,0.00,'activa',NULL),(62,'41254651760871695380&55550000000062&01*2',NULL,0.00,'activa',NULL),(63,'99477873804032833573&55550000000063&01*2',NULL,0.00,'activa',NULL),(64,'46668427446460360999&55550000000064&01*2',NULL,0.00,'activa',NULL),(65,'13157269012430384785&55550000000065&01*2',NULL,0.00,'activa',NULL),(66,'73518782034926433308&55550000000066&01*2',NULL,0.00,'activa',NULL),(67,'86766089899320901925&55550000000067&01*2',NULL,0.00,'activa',NULL),(68,'63849052185982395116&55550000000068&01*2',NULL,0.00,'activa',NULL),(69,'78452022149113253085&55550000000069&01*2',NULL,0.00,'activa',NULL),(70,'03513424723398283269&55550000000070&01*2',NULL,0.00,'activa',NULL),(71,'76573371781418671544&55550000000071&01*2',NULL,0.00,'activa',NULL),(72,'56904637623837636840&55550000000072&01*2',NULL,0.00,'activa',NULL),(73,'74405160184749532653&55550000000073&01*2',NULL,0.00,'activa',NULL),(74,'80954674821289393833&55550000000074&01*2',NULL,0.00,'activa',NULL),(75,'58109908856126687249&55550000000075&01*2',NULL,0.00,'activa',NULL),(76,'24559085468317584782&55550000000076&01*2',NULL,0.00,'activa',NULL),(77,'39403466685947394272&55550000000077&01*2',NULL,0.00,'activa',NULL),(78,'45739939121663987651&55550000000078&01*2',NULL,0.00,'activa',NULL),(79,'37830393446379013283&55550000000079&01*2',NULL,0.00,'activa',NULL),(80,'53442261362210623517&55550000000080&01*2',NULL,0.00,'activa',NULL),(81,'81016384996038118691&55550000000081&01*2',NULL,0.00,'activa',NULL),(82,'30912395112536101070&55550000000082&01*2',NULL,0.00,'activa',NULL),(83,'56295711165337655021&55550000000083&01*2',NULL,0.00,'activa',NULL),(84,'96071082158241023300&55550000000084&01*2',NULL,0.00,'activa',NULL),(85,'19273515601964726907&55550000000085&01*2',NULL,0.00,'activa',NULL),(86,'58734697906406348668&55550000000086&01*2',NULL,0.00,'activa',NULL),(87,'32507588943483249304&55550000000087&01*2',NULL,0.00,'activa',NULL),(88,'15732626000734976259&55550000000088&01*2',NULL,0.00,'activa',NULL),(89,'50581733379012816275&55550000000089&01*2',NULL,0.00,'activa',NULL),(90,'92840427915889165199&55550000000090&01*2',NULL,0.00,'activa',NULL),(91,'96133332227790755918&55550000000091&01*2',NULL,0.00,'activa',NULL),(92,'25237137674706824706&55550000000092&01*2',NULL,0.00,'activa',NULL),(93,'65832527849821610119&55550000000093&01*2',NULL,0.00,'activa',NULL),(94,'30003365329654803994&55550000000094&01*2',NULL,0.00,'activa',NULL),(95,'27011624192283954588&55550000000095&01*2',NULL,0.00,'activa',NULL),(96,'18022980153028953581&55550000000096&01*2',NULL,0.00,'activa',NULL),(97,'19705457166095480454&55550000000097&01*2',NULL,0.00,'activa',NULL),(98,'14121180534734114802&55550000000098&01*2',7,10000.00,'bloqueada',NULL);
/*!40000 ALTER TABLE `tbl_tarjetaclientes` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tbl_transacciones`
--

DROP TABLE IF EXISTS `tbl_transacciones`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tbl_transacciones` (
  `id_transaccion` int NOT NULL AUTO_INCREMENT,
  `id_tarjeta` int NOT NULL,
  `enum_tipotransaccion` enum('carga','consumo','premio') NOT NULL,
  `id_juego` int DEFAULT NULL,
  `num_monto` decimal(10,2) NOT NULL,
  `num_saldoanterior` decimal(10,2) NOT NULL,
  `num_saldonuevo` decimal(10,2) NOT NULL,
  `str_descripcion` text,
  `datetime_fechatransaccion` datetime NOT NULL,
  PRIMARY KEY (`id_transaccion`),
  KEY `fk_trans_tarjeta` (`id_tarjeta`),
  KEY `fk_trans_juego` (`id_juego`),
  CONSTRAINT `fk_trans_juego` FOREIGN KEY (`id_juego`) REFERENCES `tbl_juegos` (`id_juego`),
  CONSTRAINT `fk_trans_tarjeta` FOREIGN KEY (`id_tarjeta`) REFERENCES `tbl_tarjetaclientes` (`id_tarjeta`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tbl_transacciones`
--

LOCK TABLES `tbl_transacciones` WRITE;
/*!40000 ALTER TABLE `tbl_transacciones` DISABLE KEYS */;
/*!40000 ALTER TABLE `tbl_transacciones` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tbl_usuarios`
--

DROP TABLE IF EXISTS `tbl_usuarios`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tbl_usuarios` (
  `id_usuario` int NOT NULL AUTO_INCREMENT,
  `str_nombreusuario` varchar(50) NOT NULL,
  `str_password` varchar(255) NOT NULL,
  `enum_tipousuario` enum('admin','normal') NOT NULL DEFAULT 'normal',
  `datetime_fechacreacion` datetime NOT NULL,
  `bool_activo` tinyint(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`id_usuario`),
  UNIQUE KEY `str_nombreusuario` (`str_nombreusuario`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tbl_usuarios`
--

LOCK TABLES `tbl_usuarios` WRITE;
/*!40000 ALTER TABLE `tbl_usuarios` DISABLE KEYS */;
INSERT INTO `tbl_usuarios` VALUES (1,'admin','$2y$10$mrBNcfeQzMsq574BHzcDgO8n1tgv49o6ahK.V9g0GNT0cuobF5gIe','admin','2025-09-01 21:34:34',1),(2,'normal','$2y$10$29qsIeogtW6sWLmBx3g3h.MEW/SX7sZlBGY6gNWL4codHZxf73AqC','normal','2025-09-01 23:45:44',1);
/*!40000 ALTER TABLE `tbl_usuarios` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2025-09-04 16:04:42
